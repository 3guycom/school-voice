import{u as k,R as o,a as w,b as S,A as f,j as e,L as r,O as C}from"./index-JDxZcwZg.js";import{X as O,U as z}from"./x-CzINgp-B.js";import{c as d}from"./createLucideIcon-YQMw5vR1.js";import{S as g}from"./shield-CYkfMjwM.js";import{L as A}from"./log-out-BWRQf4I8.js";import{F as M}from"./file-text-CRSwr_Qr.js";import{B as $}from"./book-open-B2jTp5xz.js";import{M as I}from"./mail-CUcBglu-.js";import{S as L}from"./settings-CM6ss6bD.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=d("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=d("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=d("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=d("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),_=()=>{const{schoolId:t}=k(),[m,l]=o.useState(!1),[x,h]=o.useState(!1),{user:s,currentSchool:i,signOut:b,isAdmin:y,isSuperAdmin:c,setCurrentSchool:p}=w(),n=S(),u=[{icon:E,label:"Dashboard",path:"/dashboard"},{icon:D,label:"Tone Analysis",path:"/tone-analysis"},{icon:M,label:"Content Creation",path:"/content-creation"},{icon:$,label:"Tone Profiles",path:"/tone-profiles"}],j=[{icon:z,label:"Members",path:"/members"},{icon:I,label:"Invitations",path:"/invitations"},{icon:L,label:"Settings",path:"/settings"}],N=async()=>{await b(),n(f.LOGIN)};return o.useEffect(()=>{if(t&&(s!=null&&s.schools)&&s.schools.length>0){const a=s.schools.find(v=>v.id===t);a&&(!i||i.id!==t)&&p(a)}},[t,s,i,p]),o.useEffect(()=>{t||(c()?n("/super-admin"):s!=null&&s.schools&&s.schools.length>0?n(`/${s.schools[0].id}/dashboard`):n(f.NO_SCHOOLS))},[t,n,s,c]),o.useEffect(()=>{t&&(s!=null&&s.schools)&&s.schools.length>0&&(s.schools.some(a=>a.id===t)||n(`/${s.schools[0].id}/dashboard`))},[t,s,n]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("button",{className:"fixed top-4 right-4 z-50 p-2 rounded-lg bg-white shadow-lg md:hidden",onClick:()=>l(!m),children:m?e.jsx(O,{size:24}):e.jsx(H,{size:24})}),e.jsxs("nav",{className:`
        fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform transition-transform duration-200 ease-in-out z-40
        ${m?"translate-x-0":"-translate-x-full"}
        md:translate-x-0
      `,children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h1",{className:"text-2xl font-bold text-indigo-600",children:"School Voice"}),e.jsxs("div",{className:"mt-4 relative",children:[e.jsxs("button",{onClick:()=>h(!x),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-md hover:bg-gray-100",children:[e.jsx("span",{className:"truncate",children:(i==null?void 0:i.name)||"No School Selected"}),(s==null?void 0:s.schools)&&s.schools.length>1&&e.jsx(B,{size:16,className:`transform transition-transform ${x?"rotate-180":""}`})]}),x&&(s==null?void 0:s.schools)&&s.schools.length>1&&e.jsxs("div",{className:"absolute w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:[s.schools.map(a=>e.jsx(r,{to:`/${a.id}/dashboard`,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>{h(!1),l(!1)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.name}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100",children:a.role})]})},a.id)),c()&&e.jsxs(r,{to:"/super-admin",className:"block px-4 py-2 text-sm text-red-600 border-t border-gray-100 hover:bg-gray-100 flex items-center",onClick:()=>{h(!1),l(!1)},children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"Super Admin Panel"]})]})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"Features"}),u.map(a=>e.jsxs(r,{to:`/${t}${a.path}`,className:"flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",onClick:()=>l(!1),children:[e.jsx(a.icon,{size:20,className:"mr-3"}),e.jsx("span",{children:a.label})]},a.path))]}),y(t)&&e.jsxs("div",{className:"px-4 py-2 mt-6",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-4",children:"Administration"}),j.map(a=>e.jsxs(r,{to:`/${t}${a.path}`,className:"flex items-center px-4 py-3 text-gray-700 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",onClick:()=>l(!1),children:[e.jsx(a.icon,{size:20,className:"mr-3"}),e.jsx("span",{children:a.label})]},a.path))]}),c()&&e.jsxs("div",{className:"px-4 py-2 mt-6",children:[e.jsx("p",{className:"text-xs font-semibold text-red-400 uppercase tracking-wider mb-2 px-4",children:"Super Admin"}),e.jsxs(r,{to:"/super-admin",className:"flex items-center px-4 py-3 text-red-700 rounded-lg hover:bg-red-50 hover:text-red-800 transition-colors",onClick:()=>l(!1),children:[e.jsx(g,{size:20,className:"mr-3"}),e.jsx("span",{children:"Admin Panel"})]})]})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-100",children:[e.jsx("div",{className:"flex items-center px-4 py-3 mb-4",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.email)}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s==null?void 0:s.email}),(s==null?void 0:s.isSuperAdmin)&&e.jsx("span",{className:"mt-1 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Super Admin"})]})}),e.jsxs("button",{onClick:N,className:"flex items-center w-full px-4 py-3 text-gray-700 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:[e.jsx(A,{size:20,className:"mr-3"}),e.jsx("span",{children:"Sign Out"})]})]})]}),e.jsx("main",{className:`
        transition-all duration-200 ease-in-out
        md:ml-64 p-6
      `,children:e.jsx(C,{})})]})};export{_ as default};
