import{u as g,a as p,r as l,j as e,L as i,s as h}from"./index-JDxZcwZg.js";import{c as b}from"./createLucideIcon-YQMw5vR1.js";import{S as y}from"./square-pen-DNOK6Ol0.js";import{T as N}from"./trash-2-Y6MaHXoy.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=b("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),C=()=>{const{schoolId:a}=g(),{user:w,isAdmin:n}=p(),[o,c]=l.useState([]),[f,d]=l.useState(!0),[m,x]=l.useState(null);l.useEffect(()=>{(async()=>{if(a)try{d(!0);const{data:t,error:r}=await h.rpc("get_tone_profiles",{p_school_id:a});if(r)throw r;c(t||[])}catch(t){console.error("Error fetching tone profiles:",t),x("Failed to load tone profiles. Please try again.")}finally{d(!1)}})()},[a]);const j=async s=>{if(confirm("Are you sure you want to delete this tone profile?"))try{const{error:t}=await h.from("tone_profiles").delete().eq("id",s);if(t)throw t;c(o.filter(r=>r.id!==s))}catch(t){console.error("Error deleting tone profile:",t),x("Failed to delete tone profile. Please try again.")}};return f?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):m?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 my-4",children:e.jsx("p",{className:"text-red-700",children:m})})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Tone Profiles"}),n(a)&&e.jsxs(i,{to:"new",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Create Profile"]})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No tone profiles yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Create tone profiles to define your school's communication style."}),n(a)&&e.jsxs(i,{to:"new",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Create First Profile"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:s.name}),s.is_active&&e.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2.5 py-0.5 rounded",children:"Active"})]}),e.jsxs("div",{className:"mt-4 mb-6",children:[Object.entries(s.dimensions).slice(0,3).map(([t,r])=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600 capitalize",children:t.replace("_"," ")}),e.jsxs("span",{className:"text-gray-800",children:[r,"/10"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r/10*100}%`}})})]},t)),Object.keys(s.dimensions).length>3&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["+",Object.keys(s.dimensions).length-3," more dimensions"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(i,{to:`/tone-profiles/${s.id}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View Details"}),n(a)&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{to:`/tone-profiles/${s.id}/edit`,className:"text-gray-600 hover:text-gray-800",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(s.id),className:"text-red-600 hover:text-red-800",children:e.jsx(N,{className:"w-4 h-4"})})]})]})]},s.id))})]})};export{C as default};
