import{u as g,b as f,a as p,R as x,A as c,j as e,L as o}from"./index-JDxZcwZg.js";import{u as j}from"./schoolStore-DTX-YYhl.js";import{M as b}from"./mail-CUcBglu-.js";import{C as y}from"./circle-check-big-BsFOWjj3.js";import{c as N}from"./createLucideIcon-YQMw5vR1.js";import{C as v}from"./circle-alert-B391DCOR.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=N("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),M=()=>{const{token:s}=g(),r=f(),{acceptInvitation:l,error:d,loading:h,successMessage:m}=j(),{user:a,loading:t}=p(),[u,i]=x.useState("pending");return x.useEffect(()=>{s&&a&&!t?(async()=>{try{const n=await l(s);n?(i("success"),setTimeout(()=>{r(`/${n.schoolId}/dashboard`)},2e3)):i("error")}catch{i("error")}})():!t&&!a&&r(`${c.LOGIN}?returnTo=${encodeURIComponent(`/invitation/${s}`)}`)},[s,a,t,r,l]),t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(b,{className:"h-12 w-12 text-indigo-600"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"School Invitation"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Joining a school as a member"})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:h.invitations?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"})}),e.jsx("p",{className:"text-base text-gray-700",children:"Processing invitation..."})]}):u==="success"||m?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(y,{className:"h-12 w-12 text-green-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Invitation Accepted!"}),e.jsx("p",{className:"text-base text-gray-700 mb-4",children:m||"You have successfully joined the school. Redirecting to dashboard..."}),e.jsxs(o,{to:"/",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:["Go to Dashboard ",e.jsx(w,{className:"ml-2 h-4 w-4"})]})]}):d?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(v,{className:"h-12 w-12 text-red-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Processing Invitation"}),e.jsx("p",{className:"text-base text-red-700 mb-4",children:d}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(o,{to:c.LOGIN,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Sign In"}),e.jsx(o,{to:c.SCHOOLS,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"My Schools"})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-indigo-600"})}),e.jsx("p",{className:"text-base text-gray-700",children:"Verifying invitation..."})]})})})]})};export{M as default};
