import{r as o,a as y,b as E,c as w,j as e,L}from"./index-JDxZcwZg.js";import{C as O}from"./circle-alert-B391DCOR.js";import{M as T}from"./mail-CUcBglu-.js";import{L as A}from"./lock-UNwzH9jp.js";import"./createLucideIcon-YQMw5vR1.js";const C={LOGIN:"/login",REGISTER:"/register",SETTINGS:"/settings",SUPER_ADMIN:"/super-admin",CREATE_SCHOOL:"/create-school",NO_SCHOOLS:"/no-schools",SCHOOLS:"/schools",DASHBOARD:"/:schoolId/dashboard",MEMBERS:"/:schoolId/members",INVITATIONS:"/:schoolId/invitations",ACCEPT_INVITATION:"/invitations/:token",TONE_PROFILES:"/:schoolId/tone-profiles",TONE_PROFILE_DETAIL:"/:schoolId/tone-profiles/:profileId",CONTENT_CREATE:"/:schoolId/content/create",CONTENT_EDIT:"/:schoolId/content/:contentId",TONE_ANALYSIS:"/:schoolId/tone-analysis",COMPARISON:"/:schoolId/comparison"};function k(){const[m,b]=o.useState(""),[u,j]=o.useState(""),[r,x]=o.useState(!1),[h,l]=o.useState(null),[a,v]=o.useState(!1),[g,d]=o.useState(null),{signIn:S,user:i,isLoadingSchools:p,isSuperAdmin:f}=y(),n=E(),N=w();o.useEffect(()=>{const s=N.state;s!=null&&s.message&&d(s.message)},[N]),o.useEffect(()=>{var s;i&&!r&&!a&&(f()?n("/super-admin"):((s=i.schools)==null?void 0:s.length)>0?n(`/${i.schools[0].id}/dashboard`):n(C.NO_SCHOOLS))},[i,n,r,a,f]),o.useEffect(()=>{v(p)},[p]);const I=async s=>{s.preventDefault(),x(!0),l(null),d(null);try{const{success:t,error:c}=await S(m,u);t?d("Login successful! Loading your information..."):l((c==null?void 0:c.message)||"Failed to sign in")}catch(t){console.error("Login error:",t),l((t==null?void 0:t.message)||"An unexpected error occurred")}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),g&&e.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-md border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-700",children:g}),a&&e.jsx("div",{className:"flex justify-center mt-2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-green-500"})})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:I,children:[h&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(O,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("div",{className:"ml-1",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:h})})]})}),e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"absolute z-10 pl-3 text-gray-400",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 rounded-t-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:m,onChange:s=>b(s.target.value),disabled:r||a})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"absolute z-10 pl-3 text-gray-400",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full pl-10 px-3 py-2 border border-gray-300 rounded-b-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:u,onChange:s=>j(s.target.value),disabled:r||a})]})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm",children:e.jsx(L,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Don't have an account? Register"})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:r||a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400",children:r?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white mr-2"}),"Signing in..."]}):a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white mr-2"}),"Loading your information..."]}):"Sign in"})})]})]})})}export{k as default};
